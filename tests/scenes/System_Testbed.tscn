[gd_scene load_steps=9 format=3]

[ext_resource type="Script" path="res://tests/scripts/system_testbed/EntitySpawnerPanel.gd" id="1"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/SceneInspectorPanel.gd" id="2"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/ComponentViewerPanel.gd" id="3"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/SystemTriggerPanel.gd" id="4"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/EventBusLogPanel.gd" id="5"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/SystemTestbed.gd" id="6"]
[ext_resource type="Script" path="res://tests/scripts/system_testbed/Test_CombatSystem.gd" id="7"]

[sub_resource type="StyleBoxFlat" id="1"]
bg_color = Color(0.11, 0.12, 0.16, 1)
corner_radius_top_left = 12
corner_radius_top_right = 12
corner_radius_bottom_right = 12
corner_radius_bottom_left = 12
shadow_color = Color(0, 0, 0, 0.35)
shadow_size = 6
content_margin_left = 12
content_margin_right = 12
content_margin_top = 12
content_margin_bottom = 12

[sub_resource type="StyleBoxFlat" id="2"]
bg_color = Color(0.08, 0.09, 0.12, 1)
corner_radius_top_left = 8
corner_radius_top_right = 8
corner_radius_bottom_right = 8
corner_radius_bottom_left = 8
content_margin_left = 12
content_margin_right = 12
content_margin_top = 10
content_margin_bottom = 10

[node name="System_Testbed" type="Control"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 0.0
offset_bottom = 0.0
script = ExtResource("6")

[node name="RootPanel" type="PanelContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 0.0
offset_bottom = 0.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = SubResource("1")

[node name="TestEnvironment" type="Node" parent="."]

[node name="TestCombatSystem" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("7")

[node name="RootMargin" type="MarginContainer" parent="RootPanel"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 0.0
offset_bottom = 0.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="RootVBox" type="VBoxContainer" parent="RootPanel/RootMargin"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 16

[node name="HeaderContainer" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox"]
theme_override_constants/separation = 6

[node name="HeaderTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/HeaderContainer"]
text = "System Testbed Control Room"
theme_override_font_sizes/font_size = 24
theme_override_colors/font_color = Color(0.89, 0.92, 0.98, 1)

[node name="HeaderDescription" type="RichTextLabel" parent="RootPanel/RootMargin/RootVBox/HeaderContainer"]
bbcode_enabled = true
text = "Use this workspace to spawn archetypes, inspect their components, and exercise gameplay systems in isolation. Each panel focuses on a different slice of the architecture so you can validate the full Hybrid ECS pipeline."
fit_content = true
scroll_active = false
size_flags_horizontal = 3
theme_override_colors/default_color = Color(0.79, 0.82, 0.9, 1)
theme_override_font_sizes/normal_font_size = 14

[node name="MainHBox" type="HBoxContainer" parent="RootPanel/RootMargin/RootVBox"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 0.0
offset_bottom = 0.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 12

[node name="FooterBar" type="HBoxContainer" parent="RootPanel/RootMargin/RootVBox"]
size_flags_horizontal = 3
alignment = 1
theme_override_constants/separation = 12

[node name="FooterHint" type="Label" parent="RootPanel/RootMargin/RootVBox/FooterBar"]
text = "Tip: Select an entity in the Scene Inspector to unlock damage triggers and component editing."
theme_override_colors/font_color = Color(0.72, 0.76, 0.86, 1)
theme_override_font_sizes/font_size = 14

[node name="LeftColumn" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox"]
custom_minimum_size = Vector2(320, 0)
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 12

[node name="EntitySpawnerPanel" type="PanelContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn"]
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("1")
theme_override_styles/panel = SubResource("2")

[node name="EntitySpawnerContent" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="EntitySpawnerTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent"]
text = "Entity Spawner"
theme_override_font_sizes/font_size = 18

[node name="EntitySpawnerHelp" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent"]
text = "Select an archetype from the Asset Registry to instantiate a duplicate inside the TestEnvironment."
autowrap_mode = 3
theme_override_colors/font_color = Color(0.76, 0.79, 0.9, 1)
theme_override_font_sizes/font_size = 14

[node name="EntitySpawnerScroll" type="ScrollContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent"]
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal = false

[node name="EntitySpawnerBody" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent/EntitySpawnerScroll"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ArchetypeSelector" type="OptionButton" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent/EntitySpawnerScroll/EntitySpawnerBody"]
unique_name_in_owner = true
size_flags_horizontal = 3

[node name="SpawnButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent/EntitySpawnerScroll/EntitySpawnerBody"]
unique_name_in_owner = true
text = "Spawn Entity"
size_flags_horizontal = 3

[node name="SpawnStatusLabel" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/EntitySpawnerPanel/EntitySpawnerContent/EntitySpawnerScroll/EntitySpawnerBody"]
unique_name_in_owner = true
text = "Loading archetypes..."
autowrap_mode = 3

[node name="SceneInspectorPanel" type="PanelContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn"]
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("2")
theme_override_styles/panel = SubResource("2")

[node name="SceneInspectorContent" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="SceneInspectorTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent"]
text = "Scene Inspector"
theme_override_font_sizes/font_size = 18

[node name="SceneInspectorHelp" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent"]
text = "Track spawned entities, multi-select them, and delete stale instances to keep the sandbox tidy."
autowrap_mode = 3
theme_override_colors/font_color = Color(0.76, 0.79, 0.9, 1)
theme_override_font_sizes/font_size = 14

[node name="SceneInspectorScroll" type="ScrollContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent"]
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal = false

[node name="SceneInspectorBody" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent/SceneInspectorScroll"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="SceneInspectorTree" type="Tree" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent/SceneInspectorScroll/SceneInspectorBody"]
unique_name_in_owner = true
visible = false
size_flags_horizontal = 3
size_flags_vertical = 3
hide_root = true

[node name="SceneInspectorPlaceholder" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent/SceneInspectorScroll/SceneInspectorBody"]
unique_name_in_owner = true
text = "Inspect the live scene graph here."
autowrap_mode = 3

[node name="DeleteSelectedButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/LeftColumn/SceneInspectorPanel/SceneInspectorContent/SceneInspectorScroll/SceneInspectorBody"]
unique_name_in_owner = true
text = "Delete Selected"
size_flags_horizontal = 3

[node name="ComponentViewerPanel" type="PanelContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox"]
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("3")
theme_override_styles/panel = SubResource("2")

[node name="ComponentViewerContent" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="ComponentViewerTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel/ComponentViewerContent"]
text = "Component Viewer"
theme_override_font_sizes/font_size = 18

[node name="ComponentViewerHelp" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel/ComponentViewerContent"]
text = "Component properties update live as systems mutate data. Toggle read-only mode to watch value changes without editing."
autowrap_mode = 3
theme_override_colors/font_color = Color(0.76, 0.79, 0.9, 1)
theme_override_font_sizes/font_size = 14

[node name="ComponentViewerScroll" type="ScrollContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel/ComponentViewerContent"]
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal = false

[node name="ComponentViewerBody" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel/ComponentViewerContent/ComponentViewerScroll"]
unique_name_in_owner = true
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ComponentViewerPlaceholder" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/ComponentViewerPanel/ComponentViewerContent/ComponentViewerScroll/ComponentViewerBody"]
unique_name_in_owner = true
text = "Component data will appear here."
autowrap_mode = 3

[node name="RightColumn" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox"]
custom_minimum_size = Vector2(320, 0)
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 12

[node name="SystemTriggerPanel" type="PanelContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn"]
size_flags_horizontal = 3
size_flags_vertical = 1
script = ExtResource("4")
theme_override_styles/panel = SubResource("2")

[node name="SystemTriggerContent" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="SystemTriggerTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent"]
text = "System Triggers"
theme_override_font_sizes/font_size = 18

[node name="SystemTriggerHelp" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent"]
text = "Fire repeatable actions to validate CombatSystem behaviours and EventBus emissions."
autowrap_mode = 3
theme_override_colors/font_color = Color(0.76, 0.79, 0.9, 1)
theme_override_font_sizes/font_size = 14

[node name="TargetStatusLabel" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent"]
unique_name_in_owner = true
text = "No active entity selected."
theme_override_colors/font_color = Color(0.84, 0.67, 0.49, 1)
theme_override_font_sizes/font_size = 14

[node name="SystemTriggerScroll" type="ScrollContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent"]
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal = false

[node name="SystemTriggerBody" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="SystemTriggerActions" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll/SystemTriggerBody"]
unique_name_in_owner = true
size_flags_horizontal = 3
theme_override_constants/separation = 6

[node name="ApplyFireDamageButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll/SystemTriggerBody/SystemTriggerActions"]
unique_name_in_owner = true
text = "Apply 10 Fire Damage to Target"
size_flags_horizontal = 3

[node name="KillTargetButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll/SystemTriggerBody/SystemTriggerActions"]
unique_name_in_owner = true
text = "Kill Target"
size_flags_horizontal = 3

[node name="EmitEntityKilledButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll/SystemTriggerBody/SystemTriggerActions"]
unique_name_in_owner = true
text = "Emit 'entity_killed' Signal"
size_flags_horizontal = 3

[node name="SystemTriggerPlaceholder" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/SystemTriggerPanel/SystemTriggerContent/SystemTriggerScroll/SystemTriggerBody"]
unique_name_in_owner = true
text = "Trigger gameplay systems from this panel."
autowrap_mode = 3

[node name="EventBusLogPanel" type="PanelContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn"]
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("5")
theme_override_styles/panel = SubResource("2")

[node name="EventBusLogContent" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel"]
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="EventBusLogTitle" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent"]
text = "Event Bus Log"
theme_override_font_sizes/font_size = 18

[node name="EventBusLogHelp" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent"]
text = "All EventBus signals are captured here with payload context. Use Clear Log between isolated test runs."
autowrap_mode = 3
theme_override_colors/font_color = Color(0.76, 0.79, 0.9, 1)
theme_override_font_sizes/font_size = 14

[node name="EventBusLogActions" type="HBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent"]
alignment = 2
theme_override_constants/separation = 8

[node name="ClearLogButton" type="Button" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent/EventBusLogActions"]
unique_name_in_owner = true
text = "Clear Log"
size_flags_horizontal = 0

[node name="EventBusLogScroll" type="ScrollContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent"]
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_horizontal = false

[node name="EventBusLogBody" type="VBoxContainer" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent/EventBusLogScroll"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="EventBusLogOutput" type="RichTextLabel" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent/EventBusLogScroll/EventBusLogBody"]
unique_name_in_owner = true
size_flags_horizontal = 3
size_flags_vertical = 3
scroll_active = true
selection_enabled = true

[node name="EventBusLogPlaceholder" type="Label" parent="RootPanel/RootMargin/RootVBox/MainHBox/RightColumn/EventBusLogPanel/EventBusLogContent/EventBusLogScroll/EventBusLogBody"]
unique_name_in_owner = true
text = "Recent EventBus activity will be displayed here."
autowrap_mode = 3
