%% Entity Composition and Systems Overview
flowchart TB
    EntityNode["Entity Node"]
    EntityData["EntityData Resource"]
    ComponentBase["Component Base"]
    StatsComponent["StatsComponent"]
    TraitComponent["TraitComponent"]
    TraitResource["Trait Resource"]
    ArchetypeResource["Archetype Resource"]
    SystemBase["System Base"]
    DebugSystem["DebugSystem"]
    EventBus["EventBus Autoload"]

    EntityNode -- entity_data --> EntityData
    EntityData -- components[] --> ComponentBase
    ComponentBase --> StatsComponent
    ComponentBase --> TraitComponent
    TraitComponent -- traits[] --> TraitResource
    ArchetypeResource -- required_traits / trait_pool --> TraitResource
    ArchetypeResource -- validate_component() --> TraitComponent
    DebugSystem -- reads stats --> StatsComponent
    SystemBase -- emit_event()/subscribe_event() --> EventBus
    DebugSystem -- inherits --> SystemBase
    EventBus -- entity_killed --> DebugSystem
    DebugSystem -- debug_stats_reported --> EventBus
